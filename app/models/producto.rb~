class Producto < ActiveRecord::Base

  require 'will_paginate'

  attr_accessible :descripcion, :desde, :hasta, :precio, :sku

  scope :activo, lambda {where("hasta > ? and Desde < ?",Date.today,Date.today)}

  def self.active
    Producto.find(:all, :conditions => ["hasta > ? and desde < ?", Date.today, Date.today])
  end

  def self.by_sku(sku)
    Producto.find(:all, :conditions => ["hasta > ? and desde < ? and sku = ?", Date.today, Date.today, sku]).last
  end

  def self.paginated(params)
    Producto.find(:all, :conditions => ["hasta > ? and desde < ?", Date.today, Date.today]).paginate(:page => params[:page], :per_page => 10)
  end

end
